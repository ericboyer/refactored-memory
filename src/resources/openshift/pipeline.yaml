---
apiVersion: v1
kind: Template
metadata:
  name: ${NAME}
  annotations:
    app.openshfit.io/display-name: Pipeline build config for python server demo
objects:
  - apiVersion: build.openshift.io/v1
    kind: BuildConfig
    metadata:
      labels:
        build: ${NAME}-${APP_COMPONENT}
      name: ${NAME}-${APP_COMPONENT}
    spec:
      failedBuildsHistoryLimit: 5
      nodeSelector: {}
      output: {}
      postCommit: {}
      resources: {}
      runPolicy: Serial
      source:
        git:
          ref: ${BRANCH}
          uri: ${REPO}
        type: Git
      strategy:
        jenkinsPipelineStrategy:
          jenkinsfilePath: src/resources/pipeline/${APP_COMPONENT}.Jenkinsfile
        type: JenkinsPipeline
parameters:
  - name: NAME
    value: refactored-memory
    description: The application name that all objects will be assigned.
  - name: APP_COMPONENT
    value: server
    description: The component of the app e.g., server, client
  - name: REPO
    value: https://github.com/ericboyer/refactored-memory.git
    description: The source repository
  - name: BRANCH
    value: master
    description: The repository branch to reference
